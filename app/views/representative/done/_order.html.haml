%tr
  %td
    = link_to order.uid, 'https://mail.google.com/mail/u/0/#search/'+order.uid, target:["_blank"]
  %td
    - if order.customer.sales == "sales"
      .overflow-tooltip
        %span{style:'font-family:"å°å¡šã‚´ã‚·ãƒƒã‚¯ Pro"'}
          ğŸˆº
        %span{title: "#{order.customer.customer_name} æ§˜"}
          = link_to customer_path(id: order.customer.uid) do
            #{order.customer.customer_name} æ§˜
    - else
      .overflow-tooltip
        %span{title: "#{order.customer.customer_name} æ§˜"}
          = link_to customer_path(id: order.customer.uid) do
            #{order.customer.customer_name} æ§˜

    - if Order.where(customer_id: order.customer.id).sum(:difference) > 0
      %p{id: 'lightblue'}
        %i.fas.fa-coins
          = number_to_currency(Order.where(customer_id: order.customer.id).sum(:difference), format: "%u%n", unit: "Â¥")
  %td
    #{order.customer.customer_type.customer_type_name}
  %td
    = l(order.try(:order_date), format: :middle, default: '')
  %td
    = OrderType.find(order.order_type_id).order_type_name
  %td
    = QuoteDifficultyLevel.find(order.quote_difficulty_level_id).quote_difficulty_level_name
  %td
    - OrderAddress.where(order_id: order.id).each do |oa|
      = PrefectureCode.find(CustomerAddress.find(oa.customer_address_id).prefecture_code).name
  %td
    = l(order.try(:desired_delivery_date), format: :middle, default: '')
  %td
    = DesiredDeliveryType.find(order.desired_delivery_type_id).desired_delivery_type_name
  %td
    = l(order.try(:internal_delivery_date), format: :middle, default: '')
  %td
    = l(Payment.find_by(order_id: order.id).try(:payment_date), format: :middle, default: '')
  %td
    = number_to_currency(Payment.find_by(order_id: order.id).try(:amount_paid), format: "%u%n", unit: "Â¥")
  %td
    = OrderNote.find_by(order_id: order.id).try(:order_note)
  %td
    = button_to 'ä¿®æ­£ã™ã‚‹', edit_order_path(id: order.uid), method: :get

    .container
      %tbody
        %tr
        - OrderDetail.where(order_id: order.id).each do |order_detail|
          %td{align: "right"}
            â†³
          %td
            - if order_detail.mixed_techniques == "mixed"
              åˆä½“åŠ å·¥
            - else
              å˜ä½“åŠ å·¥
          - OrderTechniqueDetail.where(order_detail_id: order_detail.id).each do |order_technique_detail|
            %tbody
              %td
              %td{align: "right"}
                â†³
              %td
                = Technique.find(order_technique_detail.technique_id).technique_name
              %td
                - OrderTechniqueDetailOption.where(order_detail_id: order_detail.id).each do |order_technique_detail_option|
                  = TechniqueOption.find(order_technique_detail_option.technique_option_id).technique_option_name
                - OrderDetailOption.where(order_detail_id: order_detail.id).each do |order_detail_option|
                  = OrderOption.find(order_detail_option.order_option_id).order_option_name
              %td
                #{Factory.find(order_detail.factory_id).factory_name}å·¥å ´
              %td
                -#å›½å†…ç™ºæ³¨æ¸ˆ
              %td
                -#æµ·å¤–ç™ºæ³¨æ¸ˆ
              %td
                -#ä»•åˆ†ã‘æ¸ˆ
              %td
                -#æŒ‡ç¤ºæ›¸ä½œæˆæ¸ˆ
              %td
                -#åˆ¶ä½œæ¸ˆ