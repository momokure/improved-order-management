= form_with model: @order, local: true do |f|

  - if Department.find(UsersDepartment.find_by(user_id: current_user.id).department_id).id == 2 || Department.find(UsersDepartment.find_by(user_id: current_user.id).department_id).id == 1
    %br
    %h3 ğŸ‘©â€ğŸ³æ³¨æ–‡ç®¡ç†å¤‰æ›´ç”¨ğŸ‘¨â€ğŸ³
    .field
    %div{style: "display:inline-flex"}
      = f.label :order_date, "ã”æ³¨æ–‡æ—¥ : "
      = f.datetime_select :order_date

    .field
    %div{style: "display:inline-flex"}
      = f.label :uid, "ID : "
      = f.text_field :uid, autofocus: true, autocomplete: "uid"

    .field
    %div{style: "display:inline-flex"}
      = f.label :quote_difficulty_level_id, "ã¿ã¤ã‚‚ã‚Šé›£æ˜“åº¦ : "
      = f.collection_select(:quote_difficulty_level_id, QuoteDifficultyLevel.all, :id, :quote_difficulty_level_name)

    .field
    %div{style: "display:inline-flex"}
      = f.label :representative_user_id, "æ‹…å½“è€… : "
      = f.collection_select(:representative_user_id, User.left_joins(:users_departments).where( users_departments: { department_id: [99, 3, 2] } ), :id, :user_name, selected: order.representative_user_id)

    -#%br
    .field
      %div{style: "display:inline-flex"}
        = f.label :cancellation, "ã‚­ãƒ£ãƒ³ã‚»ãƒ« : "
        = f.check_box :cancellation, {}, 1, 0

  %br
  .field
    %div{style: "display:inline-flex"}
      = f.label :order_type_name, "ã”æ³¨æ–‡ç¨®åˆ¥ : "
      = f.collection_select(:order_type_id, OrderType.all, :id, :order_type_name)

  %br
  %h3 â³ç´å“å…ˆã¨ç´æœŸã«ã¤ã„ã¦
  = f.fields_for :customer_addresses do |customer_address|
    = render 'customer_address_fields', f: customer_address
  #links
    = link_to_add_association 'ğŸ—¾ç´å“å…ˆã‚’è¿½åŠ â•', f, :customer_addresses

  %br
  %h3 ç´å“å¸Œæœ›æ—¥ : #{l(order.try(:desired_delivery_date), format: :middle, default: '')}

  - if Department.find(UsersDepartment.find_by(user_id: current_user.id).department_id).id == 2 || Department.find(UsersDepartment.find_by(user_id: current_user.id).department_id).id == 1
    .field
      %div{style: "display:inline-flex"}
        = f.label :desired_delivery_date, "ã€€*æ³¨æ–‡ç®¡ç†è€…å¤‰æ›´ç”¨ : "
        = f.date_field :desired_delivery_date, autofocus: true, autocomplete: "desired_delivery_date"
  %h4 ç´å“å¸Œæœ›æ—¥ã®ç¨®é¡ : #{DesiredDeliveryType.find(order.desired_delivery_type_id).desired_delivery_type_name}
  - if Department.find(UsersDepartment.find_by(user_id: current_user.id).department_id).id == 2 || Department.find(UsersDepartment.find_by(user_id: current_user.id).department_id).id == 1
    .field
      %div{style: "display:inline-flex"}
        = f.label :desired_delivery_type_name, "ã€€*æ³¨æ–‡ç®¡ç†è€…å¤‰æ›´ç”¨ : "
        = f.collection_select(:desired_delivery_type_id, DesiredDeliveryType.all, :id, :desired_delivery_type_name)

  .field
    = f.label :specified_time_name, "æ™‚é–“å¸¯æŒ‡å®š"
    = f.collection_select(:specified_time_id, SpecifiedTime.all, :id, :specified_time_name)

  .field
    %div{style: "display:inline-flex"}
      = f.label :change_delivery_date, "ğŸ³ç´æœŸå¤‰æ›´", {class: 'change_delivery_date'}
      = f.check_box :change_delivery_date, {class: 'change_delivery_date'}, "change", "no_change"

  %h3 ç¤¾å†…ç´å“æ—¥ : #{l(order.try(:internal_delivery_date), format: :middle, default: '')}
  - if Department.find(UsersDepartment.find_by(user_id: current_user.id).department_id).id == 2 || Department.find(UsersDepartment.find_by(user_id: current_user.id).department_id).id == 1
    .field
      %div{style: "display:inline-flex"}
        = f.label :internal_delivery_date, "ã€€*æ³¨æ–‡ç®¡ç†è€…å¤‰æ›´ç”¨ : "
        = f.date_field :internal_delivery_date, autofocus: true, autocomplete: "internal_delivery_date"

  %br
  %h3 ğŸ£åˆ¶ä½œãƒ»åŠ å·¥å†…å®¹ã«ã¤ã„ã¦
  = f.fields_for :order_details do |order_detail|
    = render 'order_detail_fields', f: order_detail
  #links
    = link_to_add_association 'ğŸ¥šåŠ å·¥å†…å®¹ã‚’è¿½åŠ â•', f, :order_details

  %br
  %h3 ğŸ“¦ç™ºæ³¨å†…å®¹ã«ã¤ã„ã¦
  .field
    = f.label :domestic_buying, "ğŸššå›½å†…ç™ºæ³¨å•†å“ã¯"
    = f.radio_button :domestic_buying, :not_included
    = f.label :domestic_buying, "å«ã¾ã‚Œãªã„", {value: :not_included, style: "display: inline-block;"}
    = f.radio_button :domestic_buying, :included
    = f.label :domestic_buying, "å«ã¾ã‚Œã‚‹", {value: :included, style: "display: inline-block;"}

  .field
    = f.label :overseas_buying, "ğŸšæµ·å¤–ç™ºæ³¨å•†å“ã¯"
    = f.radio_button :overseas_buying, :not_included
    = f.label :overseas_buying, "å«ã¾ã‚Œãªã„", {value: :not_included, style: "display: inline-block;"}
    = f.radio_button :overseas_buying, :included
    = f.label :overseas_buying, "å«ã¾ã‚Œã‚‹", {value: :included, style: "display: inline-block;"}

  .field
    = f.label :carry_in, "ğŸ¡ãŠæŒè¾¼å•†å“ã¯"
    = f.radio_button :carry_in, :not_included
    = f.label :carry_in, "å«ã¾ã‚Œãªã„", {value: :not_included, style: "display: inline-block;"}
    = f.radio_button :carry_in, :included
    = f.label :carry_in, "å«ã¾ã‚Œã‚‹", {value: :included, style: "display: inline-block;"}

  -# - if Department.find(UsersDepartment.find_by(user_id: current_user.id).department_id).id == 6 || Department.find(UsersDepartment.find_by(user_id: current_user.id).department_id).id == 8 || Department.find(UsersDepartment.find_by(user_id: current_user.id).department_id).id == 2 || Department.find(UsersDepartment.find_by(user_id: current_user.id).department_id).id == 1
  %br
  %h2 ğŸ“¦ç™ºæ³¨è¨˜å…¥ç”¨
  = f.fields_for :buy_details do |buy_detail|
    = render 'buy_detail_fields', f: buy_detail
  #links
    = link_to_add_association "ğŸ“¦ç™ºæ³¨è©³ç´°ã‚’è¿½åŠ â•", f, :buy_details

  -# - if Department.find(UsersDepartment.find_by(user_id: current_user.id).department_id).id == 7 || Department.find(UsersDepartment.find_by(user_id: current_user.id).department_id).id == 9 || Department.find(UsersDepartment.find_by(user_id: current_user.id).department_id).id == 2 || Department.find(UsersDepartment.find_by(user_id: current_user.id).department_id).id == 1
  %br
  %h2 ğŸ“‹ä»•åˆ†ã‘è¨˜å…¥ç”¨
  = f.fields_for :sort_details do |sort_detail|
    = render 'sort_detail_fields', f: sort_detail
  #links
    = link_to_add_association "ğŸ“‹ä»•åˆ†ã‘è©³ç´°ã‚’è¿½åŠ â•", f, :sort_details

  %br
  %h3 ğŸ’´ã”å…¥é‡‘ã«ã¤ã„ã¦
  -#%b ãŠæ”¯æ‰•ã„æ–¹æ³• :
  .field
    = f.label :payment_deadline_date, "ãŠæ”¯æ‰•ã„æœŸé™æ—¥"
    = f.date_field :payment_deadline_date, autofocus: true, autocomplete: "payment_deadline_date"

  .field
    = f.label :payment_amount, "ã”å…¥é‡‘äºˆå®šé¡"
    = f.number_field :payment_amount, autofocus: true, autocomplete: "payment_deadline"

  .field
    %div{style: "display:inline-flex"}
      = f.label :payment_confirmation, "ã”å…¥é‡‘é€£çµ¡æ¸ˆ"
      = f.check_box :payment_confirmation, {}, "confirmed", "unconfirmed"

  -# - if Department.find(UsersDepartment.find_by(user_id: current_user.id).department_id).id == 4 || Department.find(UsersDepartment.find_by(user_id: current_user.id).department_id).id == 2 || Department.find(UsersDepartment.find_by(user_id: current_user.id).department_id).id == 1
  %br/
  %h2 ğŸ’´çµŒç†è¨˜å…¥ç”¨
  = f.fields_for :payments do |payment|
    = render 'payment_fields', f: payment
  #links
    = link_to_add_association 'ğŸ’´ã”å…¥é‡‘ã‚’åæ˜ â•', f, :payments

  -# - if Department.find(UsersDepartment.find_by(user_id: current_user.id).department_id).id == 17 || Department.find(UsersDepartment.find_by(user_id: current_user.id).department_id).id == 2 || Department.find(UsersDepartment.find_by(user_id: current_user.id).department_id).id == 1
  %br/
  %h2 ç™ºé€è¨˜å…¥ç”¨
  %div{style: "display:inline-flex"}
    = f.label :shipment_user_id, "ğŸššç™ºé€æ‹…å½“è€… :"
    = f.collection_select(:shipment_user_id, User.left_joins(:users_departments).where( users_departments: { department_id: [99, 17] }), :id, :user_name)
  %br/
  %br/
  %h2 ã”æ³¨æ–‡å‚™è€ƒæ¬„
  = f.fields_for :order_notes do |order_note|
    = render 'order_note_fields', f: order_note
  #links
    = link_to_add_association 'ã”æ³¨æ–‡å‚™è€ƒã‚’è¿½åŠ â•', f, :order_notes

  %br/
  %br/
  .actions
    = f.submit "ã”æ³¨æ–‡å†…å®¹ã‚’ä¿å­˜"