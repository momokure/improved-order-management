%tr
  %td
    /æ³¨æ–‡IDï¼ˆãƒªãƒ³ã‚¯ã¯Gmailã«ãŠã‘ã‚‹IDã®æ¤œç´¢çµæœï¼‰
    = link_to order.uid, 'https://mail.google.com/mail/u/0/#search/'+order.uid, target:["_blank"]
  %td
    /ãŠå®¢æ§˜ç¨®åˆ¥/ãŠåå‰ ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼IDãƒšãƒ¼ã‚¸ã«ãƒªãƒ³ã‚¯ï¼‰
    = link_to customer_path(id: order.customer.uid) do
      #{order.customer.customer_type.customer_type_name}
      #{order.customer.customer_name.to_s.truncate(15)} æ§˜
  %td
    /ã”æ³¨æ–‡ç¨®åˆ¥(ã¿ã¤ã‚‚ã‚Šé›£æ˜“åº¦)
    = OrderType.find(order.order_type_id).order_type_name
    = QuoteDifficultyLevel.find(order.quote_difficulty_level_id).quote_difficulty_level_name
  %td
    /ã”æ³¨æ–‡æ—¥
    = l(order.try(:order_date), format: :middle, default: '')
  %td
    /æ‹…å½“è€…
    = User.find(order.representative_user_id).user_name
  %td
    /ç´å“å…ˆ
    - OrderAddress.where(order_id: order.id).each do |oa|
      = PrefectureCode.find(CustomerAddress.find(oa.customer_address_id).prefecture_code).name
  %td
    /ç´å“ã”å¸Œæœ›æ—¥
    = l(order.try(:desired_delivery_date), format: :middle, default: '')
  %td
    /ç´å“ã”å¸Œæœ›ç¨®åˆ¥
    = DesiredDeliveryType.find(order.desired_delivery_type_id).desired_delivery_type_name
  %td
    /ç¤¾å†…ç´å“æ—¥
    = l(order.try(:internal_delivery_date), format: :middle, default: '')
  %td
    /ã”å…¥é‡‘æœŸé™
    = l(order.try(:payment_deadline_date), format: :middle, default: '')
  %td
    /ã”å…¥é‡‘äºˆå®šé¡
    = number_to_currency(order.try(:payment_amount), format: "%u%n", unit: "Â¥")
  %td
    /ã”å…¥é‡‘æ—¥
    = l(Payment.find_by(order_id: order.id).try(:payment_date), format: :middle, default: '')
  %td
    /ã”å…¥é‡‘é¡
    = number_to_currency(Payment.find_by(order_id: order.id).try(:amount_paid), format: "%u%n", unit: "Â¥")
  %td
    /ç™ºæ³¨çŠ¶æ³
    - BuyDetail.where(order_id: order.id).each do |buy_detail|
      #{BuyProgress.find(buy_detail.buy_progress_id).buy_progress_name}(#{User.find(buy_detail.buying_user_id).user_name})
      %br/
  %td
    - OrderDetail.where(order_id: order.id).each do |order_detail|
      - SortDetail.where(order_detail_id: order_detail).each do |sort_detail|
        æ¸ˆ(#{User.find(sort_detail.sorting_user_id).user_name})
        %br/
  %td
    /ã”æ³¨æ–‡å‚™è€ƒæ¬„
    = OrderNote.find_by(order_id: order.id).try(:order_note).to_s.truncate(10)
  %td
    = button_to 'è©³ç´°ãƒ»å¤‰æ›´', edit_order_path(id: order.uid), method: :get
    .container
      %tbody
        %tr
        - OrderDetail.where(order_id: order.id).each do |order_detail|
          %td{align: "right"}
            â†³
          %td
            - if order_detail.mixed_techniques == "mixed"
              åˆä½“åŠ å·¥
            - else
              å˜ä½“åŠ å·¥
          - OrderTechniqueDetail.where(order_detail_id: order_detail.id).each do |order_technique_detail|
            %tbody
              %td
              %td{align: "right"}
                â†³
              %td
                /åŠ å·¥æ–¹æ³•
                = Technique.find(order_technique_detail.technique_id).technique_name
                %br
                - OrderTechniqueDetailOption.where(order_detail_id: order_detail.id).each do |order_technique_detail_option|
                  #{TechniqueOption.find(order_technique_detail_option.technique_option_id).technique_option_name}
                %br
                - OrderDetailOption.where(order_detail_id: order_detail.id).each do |order_detail_option|
                  #{OrderOption.find(order_detail_option.order_option_id).order_option_name}
              %td
                /åŠ å·¥å·¥å ´
                #{Factory.find(order_detail.factory_id).factory_name}å·¥å ´
              %td
                /é€²è¡ŒçŠ¶æ³ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’è¡¨ç¤ºã€‚ã¿ã¤ã‚‚ã‚Šæ¸ˆğŸ¤ãªã©
                -# - unless order_technique_detail.progress_id == 1
                #{Progress.find(order_technique_detail.progress_id).progress_name}
              %td
                /æŒ‡ç¤ºæ›¸æ‹…å½“è€…IDãŒ1ä»¥å¤–ã®æ™‚ã€ğŸ”ãƒãƒ¼ã‚¯ã¨æŒ‡ç¤ºæ›¸æ‹…å½“è€…IDã«ã‚ˆã‚‹åå‰ã‚’è¡¨ç¤º
                - unless order_technique_detail.pasteup_user_id == 1
                  ğŸ”#{User.find(order_technique_detail.pasteup_user_id).user_name}
              %td
                /è£½ä½œæ‹…å½“è€…IDãŒ1ä»¥å¤–ã®æ™‚ã€ğŸ—ãƒãƒ¼ã‚¯ã¨è£½ä½œæ‹…å½“è€…IDã«ã‚ˆã‚‹åå‰ã‚’è¡¨ç¤º
                - unless order_technique_detail.maker_id == 1
                  ğŸ—#{User.find(order_technique_detail.maker_id).user_name}
